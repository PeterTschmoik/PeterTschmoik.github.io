<!Doctype html>
<html lang="en-us">

	<head>
		<title>Sprachsynthese&Erkennung</title>
		<meta charset="UTF-8">
	</head>

	<body>
	<!--Link formatting-->
		<div class="header-Eins" id="Sprachsynthese&Erkennung-header-Main" role="header">
		<h1>Sprachsynthese&Erkennung 2019<h1>
		<h2>Emil Ott und Daniel Vazquez Lang<h2>
		</div>
		
		<div class="Uebung 1">
		
			<div id="Boulevardier" role="article">
				<h3>Uebung 1<h3>

				<p>In dieser Übung geht es um die Fouriersynthese und -analyse. Erzeuge mit Matlab/Octave ein
				Sinusgemisch mit den folgenden Eigenschaften (f: Frequenz, A: Amplitude, phi Phasenwinkel):
				 f1=500Hz A1=1 phi1=0
				 f2=1000Hz A2=0,5 phi2=-pi/2
				 f3=2000Hz A3=0,25 phi3=pi
				und einer Dauer von 5 s. Zeichne das Sinusgemisch mit plot im Bereich t=0-20ms. Dabei soll auf
				der x-Achse die Zeit in ms abgetragen sein. Gibt die Schwingung als Wave-Datei mit wavwrite
				aus, und zwar mit einer Abtastfrequenz fa von 16kHz und einer Auflösung von 16bit. Dabei
				skalieren, um Clipping zu vermeiden.</p>
				<img src="sinusgemisch.png">
				<audio controls>
				  <source src="UE_4.wav" type="audio/wav">
				  Your browser does not support the audio tag.
				</audio>
			</div>
			
						<div id="Seconde" role="article">

				<p>Berechne die Fouriertransformation der Sinusschwingung mit der Funktion fft und stelle das 
				ermittelte Amplitudenspektrum mit plot dar. Auf der x-Achse soll dabei die Frequenz in Hertz 
				abgetragen werden dar und zwar zunächst für den Bereich zwischen 0 und Abtastfrequenz fa. 
				Was fällt beim Betrachten des Spektrums auf? </p>
				<img src="Amplitudenspektrum.png" width="500" height="500">
				<p>A:Beim betrachten des Spektrums fällt auf, dass die Sinussignale aus dem Sinusgemisch deutlich abgebildet werden und dass das 
				Amplitudenspektrum nach der Hälfte der Frequenz gespiegelt ist.</p>
			</div>
			
									<div id="Triode" role="article">

				<p>Variiere dabei die Framelänge zwischen 50ms, 100ms, 500ms, 1 s und 5 s. Welche Frequenzauflösung 
				delta f erhältst du für die verschiedenen Framelängen? Zoome nun in den Bereich 0 bis 4 kHz hinein. 
				Was fällt beim Spektrum bei der Variation der Framelänge auf? Wie kann man sich diesen Unterschied erklären? </p>
				<p>5s</p>
				<img src="5s.png" width="500" height="500">
				<p>1s</p>
				<img src="1s.png" width="500" height="500">
				<p>500ms</p>
				<img src="500ms.png" width="500" height="500">
				<p>100ms</p>
				<img src="100ms.png" width="500" height="500">
				<p>50ms</p>
				<img src="50ms.png" width="500" height="500">
				
				<p>A:Durch Variation der Framelänge und gleichbleibender Abtastrate, wird die Abbildung des Sinusgemisches genauer und da die Framelänge
				Einfluss auf die Zeitvariable hat, werden die Töne kleiner.
				</p>

			</div>
			
			<div id="Quartode" role="article">
				<p>Nimm nun in Praat den Vokal ‚a‘ und den Vokal ‚i‘ mit 16kHz mono auf, und zwar für jedes Gruppenmitglied.
				Achte darauf, dass am Anfang der Datei und am Ende keine Pausen bleiben, 
				d.h, die Datei soll gleich mit dem Sprachsignal beginnen. </p>
				<p>A Ton Mitglied 1</p>
				<audio controls>
				<source src="A.wav" type="audio/wav">
				</audio>
				<p>I Ton Mitglied 1</p>
				<audio controls>
				<source src="I.wav" type="audio/wav">
				</audio>
				<p>A Ton Mitglied 2</p>
				<audio controls>
				<source src="asound.wav" type="audio/wav">
				</audio>
				<p>I Ton Mitglied 2</p>
				<audio controls>
				<source src="isound.wav" type="audio/wav">
				</audio>
				
			
		</div>
		
		<div id="Quintode" role="article">
				<p>Lies die Datei mit wavread in deinem Matlab-Programm ein. Berechne auch von diesem Signal die Fouriertransformation, 
				diesmal mit Framebreiten von 50ms, 100ms, 500ms, 1 s. Wie unterscheiden sich die Vokale in ihrem Spektrum vom Sinusgemisch
				und wie unterscheiden sie sich voneinander?</p>			
				<p>Mitglied 1 A</p>
				<img src="EmilA.png" width="500" height="500">
				<p>Mitglied 2 A</p>
				<img src="MeinA.png" width="500" height="500">
				<p>Mitglied 1 I</p>
				<img src="EmilI.png" width="500" height="500">
				<p>Mitglied 2 I</p>
				<img src="MeinI.png" width="500" height="500">
				<p>A:Die Aufnahmen von Vokal A der Mitglieder ähneln sich stark im	Amplitudenspektrum, indem sie wie es aussieht aus drei Frequenzen
				bestehen die auch dem Sinusgemisch ähneln. Alle aufgezeichneten Töne haben viel Störgeräusch. Die Vokale A und I unterscheiden sich 
				unteranderm auch darin das im I Vokal weniger störgeräusche auftreten was daraus resultiert das der Vokal I aus einem kleinern 
				Frequenzbereich erzeugt wird.</p>
				
				<h3>Octave Code<h3>
				<p>fa=16000;<br>
Ta=1/fa;<br>
frameleange =0.05 %in sec;<br>
t=[0:Ta:frameleange-Ta];<br>
t1=[0:16000:frameleange-Ta];<br>
<br>
% Wave One<br>
phi1=0;<br>
f1=500;<br>
A1=1;<br>
erg1 = A1*sin(2*pi*f1*t+phi1);<br>
AF1=fft(erg1);<br>
% Wave Two<br>
phi2=pi/2;<br>
f2=1000;<br>
A2=0.5;<br>
erg2 = A2*sin(2*pi*f2*t+phi2);<br>
AF2=fft(erg2);<br>
% Wave Three<br>
phi3=pi;<br>
f3=2000;<br>
A3=0.25;<br>
erg3 = A3*sin(2*pi*f3*t+phi3);<br>
AF3=fft(erg3);<br>

Sinusgemisch = erg1+erg2+erg3;<br>
%figure(1);<br>
%plot(t,Sinusgemisch);axis([0,0.02,-1,1]);<br>
xlabel ("Time in ms");<br>


FFTgemisch = fft(Sinusgemisch);<br>
ABSgemisch = abs(FFTgemisch)<br>

%figure(2);<br>
%plot(ABSgemisch);axis([0,4000]);<br>


test3 = abs(AF1);<br>

read = audioread("I.wav");<br>
readfft=fft(read);<br>
readabs = abs(readfft);<br>
figure(3);<br>
plot(readabs);<br>
%plot(t,erg1);axis([0,0.02,-1,1]);<br>
%xlabel ("Time in ms");<br>




<br>
<br>
%figure(2);<br>
%plot(t,erg2);axis([0,0.02,-1,1]);<br>
%xlabel ("Time in ms");<br>

<br>
<br>


%wavwrite(erg3, 16000, "UE_3.wav");<br>
%figure(3);<br>
%plot(t,erg3);axis([0,0.02,-1,1]);<br>
%xlabel ("Time in ms");<br>



AF4=fft(test);<br>
%figure(1);<br>
%plot(t,test);axis([0,0.02,-1,1]);<br>
%plot(AF4,t)<br>

%audiowrite("UE_4.wav", test, 16000);<br>
</p>
		</div>
		
		<h2>&Uuml;bung 2</h2>

		<div id="Quartode" role="article">
				<p>Mit dem Headset und PRAAT soll von jedem Gruppenmitglied ein anderes dreisilbiges Wort
aufgezeichnet werden. Das Wavesignal kann dann im Edit-Fenster angezeigt werden. Nun soll
zunächst die phonetische Transkription nach der folgenden SAMPA-Notation erfolgen: </p>
				<p>Wort: Affentanz Mitglied 1</p>
				<p>SAMPA-Notation: af@ntants</p>
				<audio controls>
				<source src="affentanz.wav" type="audio/wav">
				</audio>
				<p>Wort: Achterbahn Mitglied 2</p>
				<p>SAMPA-Notation: axt6ba:n</p>
				<audio controls>
				<source src="achterbahn.wav" type="audio/wav">
				</audio>
				<p>Wort: Affentanz</p>
				<img src="AffentanzWave.png" width="850" height="250">
				<p>Wort:Achterbahn</p>
				<img src="AchterbahnWave1.png" width="850" height="250">
		</div>
		
<p>Das heißt zum Beispiel, daß das Wort "Sprachlabor" wie folgt transkribiert wird:
[SpRa:xlabo:6] (eckige Klammern sollen die Transkription kennzeichnen). Nun soll im Editor
durch Anwahl mit der Maus die Länge der einzelnen Laute im aufgezeichneten Wort bestimmt
werden. Dazu wählt man mit linkem Mausklick den Beginn des gewünschten Bereichs an und
zieht mit der Maus nach rechts, so daß sich das rosaumrandete Fenster in der gewünschten
Breite öffnet. Über dem rosa Rahmen erscheinen links und rechts Anfangs- und Endzeitpunkt
des gewählten Bereichs, in der Mitte die Länge in Sekunden. Durch Abspielen (Button über
Rahmen drücken) kann der Bereich nun wiedergegeben werden.
Darauf achten, dass in gesprochener Sprache oft Verschleifungen und Reduktionen auftreten!
Laute, die nicht gesprochen wurden, können auch nicht ausgemessen werden.

Bei der Grundfrequenz handelt es sich um die Frequenz der Stimmbandschwingungen, die
natürlich nur bei stimmhaften Lauten (stimmhafte Konsonanten und Vokale) existiert. Um sie
zu bestimmen, geht man in die Mitte eines stimmhaften Lautes und zoomt so weit hinein, daß
die Periodizität gut zu erkennen ist. Zur Orientierung kann man z.B. auffällige
Amplitudenminima im Sprachsignal wählen und den Abstand zwischen zwei solchen
charakteristischen Minima messen. Die Grundfrequenz ergibt sich dann aus dem Kehrwert
(Beispiel: gemessener Abstand 4 ms -> Grundfrequenz: 1/(0.004 s)= 250 Hz).</p>
<table><tr>
<td><p>Tabelle für das Wort Affentanz</p><img src="TabelleAffentanz.png" alt="Tabelle für das Wort Affentanz" width="350" height="300"></td>
<td><p>Tabelle für das Wort Achterbahn</p><img src="TabelleAchterbahn.png" alt="Tabelle für das Wort Achterbahn" width="350" height="300"></td>
</tr></table>

<div id="Quintande" role="article">
<p>Bei der Grundfrequenz handelt es sich um die Frequenz der Stimmbandschwingungen, die
natürlich nur bei stimmhaften Lauten (stimmhafte Konsonanten und Vokale) existiert. Um sie
zu bestimmen, geht man in die Mitte eines stimmhaften Lautes und zoomt so weit hinein, daß
die Periodizität gut zu erkennen ist. Zur Orientierung kann man z.B. auffällige
Amplitudenminima im Sprachsignal wählen und den Abstand zwischen zwei solchen
charakteristischen Minima messen. Die Grundfrequenz ergibt sich dann aus dem Kehrwert
(Beispiel: gemessener Abstand 4 ms -> Grundfrequenz: 1/(0.004 s)= 250 Hz).
Wenn uns diese Angaben vorliegen, können wir sie verwenden, um dasselbe Wort mit
MBROLA synthetisieren zu lassen.
Man kann im Prinzip fast beliebig viele Stützstellen für die Grundfrequenz angeben, wir
beschränken uns aber zunächst auf einen in der Mitte des Lautes. Für stimmlose Laute
erübrigt sich die Angabe des Grundfrequenzwertes verständlicherweise.
				<p>Wort: Affentanz Mitglied 1</p>
				<p>MBROLA synthetisiert</p>
				<audio controls>
				<source src="affentanz_Mbroli.wav" type="audio/wav">
				</audio>
				<p>Wort: Achterbahn Mitglied 2</p>
				<p>MBROLA synthetisiert</p>
				<audio controls>
				<source src="achterbahn_Mbroli.wav" type="audio/wav">
				</audio>
				<p>Wort: Affentanz</p>
				<img src="MAffe.png" width="850" height="250">
				<p>Wort:Achterbahn</p>
				<img src="MAchter.png" width="850" height="250">
				
				<p>Gib das synthetische Wort wieder und vergleiche mit dem Original. Dazu kann das
synthetische in ein WAV-File exportiert werden. Sieh dir das synthetische File in PRAAT an und
kontrolliere ob die Lautlängen und die Grundfrequenz korrekt realisiert wurden. <br>Frage: Wie
unterscheidet sich die Synthese-Wellenform vom Original? Die Grundstruktur ähnelt sich stark, aber die Amplituden sind um einiges stärker bei den meisten Vokalen in der synthese. 
<br>Frage: Wie klingt die Synthese im
Vergleich zum Original? Das Wort in der Synthese ist deutlich erkennbar, durch verbesserung des Ergebnisses mit weiteren Grundfrequenzen bekommt die Synthese einen besseren Klang und kling "Menschlicher"
. Dennoch ist sie Klar vom Original zu unterscheiden.
<br>Frage: Wie gut werden die Dauern und die Grundfrequenzkontur des
Originals nachgebildet? Die Dauer der einzelnen Vokale werden sehr gut abgebildet, unteranderem auch die Grundfrequenzen </p>
</div>

<div id="Sextade" role="article">
<p>Verbessere das Ergebnis, in dem du je Laut drei Grundfrequenz-Werte mißt (am Anfang, in
der Mitte und am Ende). Als nächstes sprich einen kurzen Satz und verfahre genau wie beim
Einzelwort. Hier reicht ein Grundfrequenzwert pro Laut. <br>Frage: Vergleiche die Sprachqualität von
Einzelwort und Satz? Mann erkennt sofort, dass bei dem Satz nur eine Grundfrequenz verwendet wurde, nicht wie bei dem einzel Wort und dadurch erscheint der Satz viel 
unnatürlicher und klingt wie von einem Computer gesprochen. Die einzelnen Vokale im Satz scheinen auch verschwommener und unklarer.</p>
<img src="last.png" width="250" height="650">
<p>Original Satz: Ich hatte heute Mittag hunger</p>
<audio controls>
				<source src="hatte_hunger_orginal.wav" type="audio/wav">
				</audio>
				<p>MBROLA syn Satz: Ich hatte heute Mittag hunger</p>
<audio controls>
				<source src="hatte_hunger.wav" type="audio/wav">
				</audio>
								<p>Original Satz</p>
				<img src="satzmensch.png" width="850" height="250">
								<p>MBROLA syn</p>
				<img src="satz.png" width="850" height="250">
</div>
	</body>
</html>